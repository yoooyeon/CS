# 필터와 인터셉터

## 필터와 인터셉터는 왜 필요할까?
- 로그인이 필요한 기능들에 모두 인증하는 코드를 작성하면 중복 코드가 발생된다.
- 이러한 공통된 관심 사항을 한 곳에서 처리하면 비즈니스 로직에 더 집중할 수 있다.
- 이를 AOP를 활용할 수 있다. 웹과 관련된 것이라면 필터와 인터셉터를 사용하면 좋다.
- 왜냐하면 ServletRequest와 ServletResponse를 파라미터에 제공해주기 때문이다.
## 필터
- 자바 표준 스펙
- 디스패처 서블릿에 전달되기 전과 후에 부가작업
- init, doFilter, destory 메서드를 오버라이드해서 사용 가능
- 필터는 체인 방식으로 처리
- 구현
  - `@WebFilterurl` + `@ServletComponentScan` : url 패턴으로 적용 가능 , order 적용 불가
  - `FilterRegistrationBean`: order, url 모두 적용 가능
## 인터셉터
- 스프링이 제공
- 디스패처 서블릿이 컨트롤러를 호출하기 전후 요청에 대한 부가 작업
- 인터셉터 인터페이스에서 제공하는 메서드
  - preHandle, postHandle, afterCompletion
- WebConfigurer 인터페이스를 구현하여 addInterceptor 오버라이딩 하여 구현
## 차이
- 다음 필터를 실행하기 위해 개발자가 명시적으로 작성
- 다음 인터셉터 실행에 대해 신경써야할 부분 없음
- 필터는 ServletRequest, ServletResponse를 중간에 다른 객체로 바꿀 수 있지만 인터셉터는 불가능하다.
- 필터에서 예외가 발생하면 `@ControllerAdvice`에서 처리하지 못하는 반면 인터셉터에서는 처리 가능하다.
## 각각 언제 사용해야할까?
- 필터는 web, 인터셉터는 spring과 관련된 처리를 하는게
- 필터는 인코딩, 보안, 로킹 등 서블릿 컨텍스트 레벨에서 처리해야 하는 경우
- 인터셉터는 컨트롤러 호출 전후 추가 작업을 수행해야 할 경우
- 예를 들어 로깅, 컨트롤러로 넘겨주는 정보의 가공, 세부적인 인증/인가
