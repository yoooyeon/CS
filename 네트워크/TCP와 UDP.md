# TCP와 UDP

TCP와 UDP 모두 전송 계층에서 사용되는 프로토콜로 데이터를 보내고 받을 때 사용됩니다.

## TCP
- TCP 3Way Handshake를 통해 신뢰성 있고 연결지향형 통신을 제공합니다.
- 헤더에 UDP에 비해 더 많은 값 저장합니다.
- 오류 검출 및 회복 기능이 있고, 순서가 보장되도록 패킷을 전송합니다.

### TCP 3 Way Handshake

## UDP
- 비연결지향통신 입니다.
- TCP에 비해 간단한 헤더를 가져 가볍고 TCP 3Way Handshake과 같은 과정이 없어 속도가 빠릅니다.
- 수신 했는지 확인하지 않습니다. 체크섬으로 수신 측에서 오류가 발생했는지만 감지가 가능합니다. 어플리케이션 계층에서 따로 처리가 필요합니다.
- 속도가 중요한 스트리밍, 실시간 서비스나 연결지향 통신이 필요 없고 빠른 속도의 통신이 필요한 DNS, DHCP 서버에서 통신할 때 사용됩니다.

## TCP와 UDP 차이점
### 헤더(Header)
#### UDP Header
- 수신지 Port 번호
- 송신지 Port 번호
- Checksum

#### TCP Header
- 수신지 Port 번호
- 송신지 Port 번호
- ACK, SYN
- Window Size
- FLAG
- Checksum



### 오류제어, 흐름제어, 혼잡제어

#### 흐름제어
흐름제어는 송신측과 수신측의 데이터 처리 속도 차이를 위해 사용됩니다. 
- TCP
  - Stop and Wait ACK 메시지를 받아야만 다음 데이터를 보냅니다. 구조가 간단하지만 응답이 올 때까지 계속 대기해야 하므로 비효율적입니다.
  * Sliding Window 수신 버퍼 사이즈를 반영해서 동적으로 전송량을 조절합니다. 순차적으로 ACK 메시지를 받지 않더라도 슬라이딩 윈도우 사이즈에 한정하여 데이터를 연속적으로 전송 가능합니다.

#### 혼잡제어
혼잡제어는 송신측에서 보내는 데이터 전송 속도를 제어하기 위해 사용됩니다.
- TCP
  * Slow Start (느린 시작)
    * 
  * Congestion Avoidance (혼잡 회피)
#### 오류제어
- UDP는 체크섬으로 수신지에서 오류가 발생했는지 검출만 가능합니다.
- TCP
  * Stop and Wait - 흐름제어에서 Stop and Wait 사용 시  패킷을 보내고 ACK 응답을 받지 못하고 **타임아웃**이 발생하면 재전송 합니다.
  * Go Back N - Sliding Window 방식 사용 시  오류가 발생한 데이터부터 전부 재전송 합니다.
  * Selective Repeat - Sliding Window 방식 사용 시  전송에 성공한 데이터들도 다시 재전송하는 것이 비효율적이라 개선된 방식입니다. 오류가 발생한 데이터만 재전송하게 됩니다. 그러면 데이터가 순차적으로 정렬될 필요하 있습니다.



### QUIC은 왜 UDP를 기반으로 했을까?
- TCP는 이미 많은 정보들이 저장되고 있습니다. 웹페이지 로딩 속도 개선을 위해 더 가볍게 만들 필요가 있었습니다. TCP의 내부 구조를 개선하여 사용하려면 복잡하여 UDP를 선택합니다.
- UDP의 빠른 속도와 TCP의 신뢰성 장점을 가져와 효율성을 높였습니다. 


